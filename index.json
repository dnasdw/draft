[{"categories":["pc"],"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:1:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#安装静态网站生成器hugo-extended"},{"categories":["pc"],"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:2:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#创建或使用守望者仓库watcher_test"},{"categories":["pc"],"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:3:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#创建部署仓库draft"},{"categories":["pc"],"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:4:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#创建评论仓库comments_test"},{"categories":["pc"],"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:5:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#创建源文件仓库pages_draft"},{"categories":["pc"],"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:6:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#创建my_github_token"},{"categories":["pc"],"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:7:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#把my_github_token配置到守望者仓库中"},{"categories":["pc"],"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 https://github.com/dnasdw/public_reference/blob/master/YAML/.github/workflows/draft-gh-pages.yml 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:8:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#配置守望者"},{"categories":["pc"],"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:9:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#配置中转worker"},{"categories":["pc"],"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:10:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#github-pages地址"},{"categories":["pc"],"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:11:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#安装评论系统"},{"categories":["pc"],"content":"更新config 配置参考 https://github.com/dnasdw/public_reference/blob/master/TOML/pages_draft/config.toml ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:12:0","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#更新config"},{"categories":["pc"],"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:12:1","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#菜单url"},{"categories":["pc"],"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:12:2","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#头像文件"},{"categories":["pc"],"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:12:3","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#网站图标"},{"categories":["pc"],"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:12:4","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#补充缺失的中文译文"},{"categories":["pc"],"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:12:5","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#作者配置"},{"categories":["pc"],"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/draft/posts/how-to-create-this-website/:12:6","series":[],"tags":["jamstack","hugo","守望者","github","github pages","utterances","github actions","cloudflare","cloudflare workers","webhook"],"title":"如何创建这个网站","uri":"/draft/posts/how-to-create-this-website/#配置pwa"},{"categories":null,"content":" 你没有连接至互联网, 只有缓存的页面可用. ","date":"0001-01-01","objectID":"/draft/offline/:0:0","series":null,"tags":null,"title":"离线","uri":"/draft/offline/#"}]